"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11010],{51787:function(e,t,n){n.d(t,{u:function(){return b},t:function(){return g}});var o=n(20568),i=n(85738);let r=(0,i.ax)({id:84532,name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}],testnet:!0}),s=(0,i.ax)({id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}]}),a=(0,i.ax)({id:11155420,name:"OP Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com",apiUrl:"https://optimism-sepolia.blockscout.com/api"}],testnet:!0}),l=(0,i.ax)({id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io"}]}),c=(0,i.ax)({id:999999999,name:"Zora Sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},blockExplorers:[{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/",apiUrl:"https://sepolia.explorer.zora.energy/api"}],testnet:!0}),d=(0,i.ax)({id:7777777,name:"Zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},blockExplorers:[{name:"Explorer",url:"https://explorer.zora.energy",apiUrl:"https://explorer.zora.energy/api"}]}),u=[s.id,r.id,l.id,a.id,d.id,c.id,34443,919,42220,44787,204,5611];var x=n(27180),h=n(94646),m=n(45890),p=n(78725);async function y(e){var t,o,i,r;let s;let{transaction:a}=e,l=null!==(i=null!==(o=e.from)&&void 0!==o?o:null===(t=e.account)||void 0===t?void 0:t.address)&&void 0!==i?i:void 0,c=await (0,h.q)(a.gas)||await (0,p.Q)({transaction:a,from:l}),d=await (0,x.o)({client:a.client,chain:a.chain});if(r=a.chain,u.includes(r.id)){let{estimateL1Fee:e}=await n.e(82295).then(n.bind(n,82295));s=await e({transaction:a})}else s=0n;let y=c*d+s;return{ether:(0,m.n9)(y),wei:y}}var f=n(71551),j=n(73303),v=n(80383);function g(e){let{showPayModal:t,gasless:n,wallet:i,switchChain:r}=e,s=null==i?void 0:i.getAccount();return(0,o.useMutation)({mutationFn:async e=>{var o;i&&e.chain.id!==(null===(o=i.getChain())||void 0===o?void 0:o.id)&&(await r(e.chain),s=i.getAccount());let a=s;if(!a)throw Error("No active account");return t?new Promise((o,i)=>{let r=async()=>{try{let t=await (0,f.sendTransaction)({transaction:e,account:a,gasless:n});o(t)}catch(e){i(e)}};(async()=>{try{if(!(await (0,v.MY)(e.client)).find(t=>t.chain.id===e.chain.id)){r();return}let[n,s]=await Promise.all([(0,j.p)({address:a.address,chain:e.chain,client:e.client}),b(e,null==a?void 0:a.address)]),l=n.value;if(s<l){r();return}t({tx:e,sendTx:r,rejectTx:i,resolveTx:o,totalCostWei:s,walletBalance:n})}catch(e){console.error("Failed to estimate cost",e),r()}})()}):(0,f.sendTransaction)({transaction:e,account:a,gasless:n})}})}async function b(e,t){try{let n=await y({transaction:e,from:t}),o=n.wei/10n,i=await (0,h.q)(e.value);return n.wei+o+(i||0n)}catch(o){if(t)return await b(e);let n=await (0,h.q)(e.value);if(!n)return 0n;return n+n/100n}}},11010:function(e,t,n){n.r(t),n.d(t,{default:function(){return ez}});var o=n(3827),i=n(62177),r=n(64090),s=n(71548),a=n(83286);function l(e){let t=e.toToken.chainId===e.onRampToken.token.chainId,n=(0,a.Kn)(e.toToken.tokenAddress)===(0,a.Kn)(e.onRampToken.token.tokenAddress);return!(t&&n)}var c=n(63621),d=n(45890),u=n(72568),x=n(51102),h=n(17440),m=n(73667),p=n(61863),y=n(23565),f=n(43051);async function j(e){try{let t=(0,y.NX)(e.client),n=await t((0,f.EW)(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({toAddress:e.toAddress,fromCurrencySymbol:e.fromCurrencySymbol,toChainId:e.toChainId.toString(),toTokenAddress:e.toTokenAddress,fromAmount:e.fromAmount,toAmount:e.toAmount,maxSlippageBPS:e.maxSlippageBPS,isTestMode:e.isTestMode,purchaseData:e.purchaseData,fromAddress:e.fromAddress})});if(!n.ok){let e=await n.json();if(e&&"error"in e)throw e;throw Error("HTTP error! status: ".concat(n.status))}return(await n.json()).result}catch(e){throw console.error("Fetch error:",e),e}}var v=n(14297),g=n(48762),b=n(52731),w=n(94071),C=n(82161),T=n(972),k=n(53326),S=n(96088),A=n(39724),E=n(31137),B=n(3702),L=n(32788),W=n(49580),F=n(63805),z=n(93336),D=n(326),O=n(72433),I=n(92959),P=n(93610),M=n(68982);function R(e){let{estimatedSeconds:t,quoteIsLoading:n}=e;return(0,o.jsxs)(E.Container,{bg:"tertiaryBg",flex:"row",borderColor:"borderColor",style:{borderRadius:u.q0.md,borderTopLeftRadius:0,borderTopRightRadius:0,justifyContent:"space-between",alignItems:"center",borderWidth:"1px",borderStyle:"solid"},children:[(0,o.jsxs)(E.Container,{flex:"row",center:"y",gap:"xxs",color:"accentText",p:"sm",children:[(0,o.jsx)(i.T39,{width:u.EA.sm,height:u.EA.sm}),n?(0,o.jsx)(C.Skeleton,{height:u.JB.xs,width:"50px",color:"borderColor"}):(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:void 0!==t?"~".concat((0,M.Z)(t)):"--"})]}),(0,o.jsxs)(B.Button,{variant:"ghost",onClick:e.onViewFees,gap:"xs",children:[(0,o.jsx)(E.Container,{color:"accentText",flex:"row",center:"both",children:(0,o.jsx)(q,{size:u.EA.sm})}),(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"View Fees"})]})]})}let q=e=>(0,o.jsxs)("svg",{width:e.size,height:e.size,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,o.jsx)("path",{d:"M9.5 1.5H2.5C1.94772 1.5 1.5 1.94772 1.5 2.5V9.5C1.5 10.0523 1.94772 10.5 2.5 10.5H9.5C10.0523 10.5 10.5 10.0523 10.5 9.5V2.5C10.5 1.94772 10.0523 1.5 9.5 1.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M4.5 7.5L7.5 4.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});var N=n(58385),_=n(92432);function V(e){return(0,o.jsxs)(E.Container,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderRadius:u.q0.md,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"1px",borderStyle:"solid",borderBottom:"none",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)(H,{variant:"ghost",onClick:e.onSelectCurrency,style:{minHeight:"64px",justifyContent:"flex-start",minWidth:"50%"},gap:"sm",children:[(0,o.jsx)(e.currency.icon,{size:u.EA.md}),(0,o.jsxs)(E.Container,{flex:"row",center:"y",gap:"xxs",color:"secondaryText",children:[(0,o.jsx)(L.Text,{color:"primaryText",children:e.currency.shorthand}),(0,o.jsx)(i.v4q,{width:u.EA.sm,height:u.EA.sm})]})]}),(0,o.jsx)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:u.W0.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:u.W0.sm},children:e.isLoading?(0,o.jsx)(C.Skeleton,{width:"100px",height:u.JB.lg}):(0,o.jsx)(L.Text,{size:"lg",color:e.value?"primaryText":"secondaryText",children:e.value?"".concat((0,c.u)(Number(e.value),6)):"--"})})]})}let H=(0,_.Z)(B.Button)(()=>({"&[disabled]:hover":{borderColor:"transparent"}}));var U=n(12441),K=n(33019),Q=n(70001),J=n(96856),Z=n(4966),Y=n(76394),G=n(95707),X=n(63391);function $(e){var t;let n=(0,Z.useCustomTheme)(),r=(0,Y.f)(),s=e.walletId||(null===(t=r.find(t=>{var n;return(null===(n=t.getAccount())||void 0===n?void 0:n.address)===e.address}))||void 0===t?void 0:t.id);return(0,o.jsx)(E.Container,{bg:"tertiaryBg",style:{borderRadius:u.q0.lg,border:"1px solid ".concat(n.colors.borderColor),...e.containerStyle},children:(0,o.jsxs)(B.Button,{fullWidth:!0,disabled:e.disabled,onClick:e.onClick,variant:"ghost",style:{justifyContent:"space-between",padding:u.W0.sm,backgroundColor:n.colors.tertiaryBg},gap:"sm",children:[(0,o.jsxs)(E.Container,{flex:"row",center:"y",gap:"sm",color:"secondaryText",children:[s?(0,o.jsx)(G.WalletImage,{id:s,size:u.EA.md,client:e.client}):(0,o.jsx)(X.D,{size:u.EA.md}),(0,o.jsx)(L.Text,{size:"sm",color:"primaryText",children:(0,a.Xn)(e.address)})]}),!e.disableChevron&&(0,o.jsx)(i.v4q,{width:u.EA.sm,height:u.EA.sm,style:{color:n.colors.secondaryText}}),e.checked&&(0,o.jsx)(i.nQG,{width:u.EA.md,height:u.EA.md})]})})}function ee(e){let[t,n]=(0,r.useState)(""),s=(0,r.useMemo)(()=>(0,a.UJ)(t),[t]),l=!!t&&!s,c=(0,r.useSyncExternalStore)(U.y.connectedWallets.subscribe,U.y.connectedWallets.getValue);function d(){e.onSelect(t),e.onBack()}return(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Send to"}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(J.Input,{"data-error":l,value:t,placeholder:"Enter wallet address",variant:"outline",onChange:e=>n(e.target.value),style:{paddingRight:"50px"},onKeyDown:e=>{s&&"Enter"===e.key&&d()}}),(0,o.jsx)(Q.ToolTip,{tip:"Confirm",children:(0,o.jsx)(B.IconButton,{disabled:!s,style:{position:"absolute",right:0,top:0,bottom:0,width:"40px"},onClick:d,"aria-label":"Confirm",children:(0,o.jsx)(i.LZ3,{width:u.EA.md,height:u.EA.md})})})]}),l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsx)(L.Text,{color:"danger",size:"sm",children:"Invalid address"})]}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(K.TextDivider,{text:"OR"}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(L.Text,{size:"sm",children:"Connected"}),(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsx)(E.Container,{flex:"column",gap:"sm",children:c.map(t=>{var n;let i=((null===(n=t.getAccount())||void 0===n?void 0:n.address)||"").toLowerCase();return(0,o.jsx)($,{address:i,client:e.client,onClick:()=>{e.onSelect(i),e.onBack()},disableChevron:!0,checked:i===e.receiverAddress.toLowerCase(),walletId:t.id},t.id)})})]})}var et=n(28101);function en(e){return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)(E.Container,{p:"lg",children:(0,o.jsx)(E.ModalHeader,{title:"Pay with",onBack:e.onBack})}),(0,o.jsx)(E.Line,{}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(E.Container,{flex:"column",gap:"xs",px:"lg",children:et.QT.map(t=>(0,o.jsxs)(eo,{fullWidth:!0,variant:"secondary",onClick:()=>e.onSelect(t),gap:"sm",children:[(0,o.jsx)(t.icon,{size:u.EA.lg}),(0,o.jsxs)(E.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{color:"primaryText",children:t.shorthand}),(0,o.jsx)(L.Text,{size:"sm",children:t.name})]})]},t.shorthand))}),(0,o.jsx)(T.L,{y:"lg"})]})}let eo=(0,_.Z)(B.Button)(()=>{let e=(0,Z.useCustomTheme)();return{background:e.colors.tertiaryBg,justifyContent:"flex-start",gap:u.W0.sm,padding:u.W0.sm,"&:hover":{background:e.colors.secondaryButtonBg,transform:"scale(1.01)"},transition:"background 200ms ease, transform 150ms ease"}});function ei(e,t){let n=(window.innerHeight-750)/2,o=(window.innerWidth-500)/2;return window.open("".concat(e,"&theme=").concat(t),"thirdweb Pay","width=".concat(500,", height=").concat(750,", top=").concat(n,", left=").concat(o))}var er=n(79048),es=n(47082),ea=n(15497),el=n(24134),ec=n(10194),ed=n(35149),eu=n(37697),ex=n(94322),eh=n(11832);function em(e){var t,n,i,s;let a=(0,es.useQueryClient)(),{openedWindow:l}=e,c=(0,el.s)({intentId:e.intentId,client:e.client}),d="loading";(null===(t=c.data)||void 0===t?void 0:t.status)==="ON_RAMP_TRANSFER_FAILED"||(null===(n=c.data)||void 0===n?void 0:n.status)==="PAYMENT_FAILED"?d="failed":(null===(i=c.data)||void 0===i?void 0:i.status)==="CRYPTO_SWAP_FALLBACK"?d="partialSuccess":(null===(s=c.data)||void 0===s?void 0:s.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(d="completed"),(0,r.useEffect)(()=>{var e,t;l&&c.data&&((null===(e=c.data)||void 0===e?void 0:e.status)==="CRYPTO_SWAP_REQUIRED"||(null===(t=c.data)||void 0===t?void 0:t.status)==="ON_RAMP_TRANSFER_COMPLETED")&&l.close()},[c.data,l]);let u=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{var e;u.current||(null===(e=c.data)||void 0===e?void 0:e.status)!=="ON_RAMP_TRANSFER_COMPLETED"||(u.current=!0,(0,ec.K)(a))},[c.data,a]),(0,r.useEffect)(()=>{var t;(null===(t=c.data)||void 0===t?void 0:t.status)==="CRYPTO_SWAP_REQUIRED"&&e.onShowSwapFlow(c.data)},[c.data,e.onShowSwapFlow]),(0,o.jsxs)(E.Container,{p:"lg",children:[(0,o.jsx)(E.ModalHeader,{title:"Buy",onBack:e.onBack}),e.hasTwoSteps&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(ed.E,{steps:2,currentStep:1}),(0,o.jsx)(T.L,{y:"sm"}),(0,o.jsxs)(L.Text,{size:"xs",children:["Step 1 of 2 - Buying ",e.quote.onRampToken.token.symbol," with"," ",e.quote.fromCurrencyWithFees.currencySymbol]})]}),(0,o.jsx)(ep,{uiStatus:d,onDone:e.onDone,fiatStatus:c.data,client:e.client,isBuyForTx:e.isBuyForTx,quote:e.quote,isEmbed:e.isEmbed})]})}function ep(e){let{uiStatus:t}=e,n=e.fiatStatus?(0,ex.B)(e.fiatStatus):void 0,r=e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status?e.fiatStatus:void 0,s=e.quote.onRampToken,a=(0,o.jsx)(eh.s,{client:e.client,token:(null==r?void 0:r.source)?{chainId:r.source.token.chainId,address:r.source.token.tokenAddress,symbol:r.source.token.symbol||"",amount:r.source.amount}:{chainId:s.token.chainId,address:s.token.tokenAddress,symbol:s.token.symbol,amount:s.amount},fiat:{amount:e.quote.fromCurrencyWithFees.amount,currencySymbol:e.quote.fromCurrencyWithFees.currencySymbol},statusMeta:(null==r?void 0:r.source)&&n?{color:null==n?void 0:n.color,text:null==n?void 0:n.status,txHash:r.source.transactionHash}:void 0});return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)(T.L,{y:"xl"}),"loading"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Container,{flex:"row",center:"x",children:(0,o.jsx)(k.Spinner,{size:"3xl",color:"accentText"})}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Buy Pending"}),(0,o.jsx)(T.L,{y:"sm"}),!(0,ea.tq)()&&(0,o.jsx)(L.Text,{center:!0,children:"Complete the purchase in popup"}),(0,o.jsx)(T.L,{y:"xxl"}),a]}),"failed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Container,{flex:"row",center:"x",children:(0,o.jsx)(eu.E,{size:u.EA["3xl"]})}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Transaction Failed"}),(0,o.jsx)(T.L,{y:"xxl"}),a]}),"completed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Container,{flex:"row",center:"x",color:"success",children:(0,o.jsx)(i.NhS,{width:u.EA["3xl"],height:u.EA["3xl"]})}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Buy Complete"}),e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"xxl"}),a,(0,o.jsx)(T.L,{y:"sm"})]}),!e.isEmbed&&(0,o.jsx)(B.Button,{variant:"accent",fullWidth:!0,onClick:e.onDone,children:e.isBuyForTx?"Continue Transaction":"Done"})]})]})}var ey=n(4718),ef=n(66766);function ej(e){let t=l(e.quote),[n,i]=(0,r.useState)(t?{id:"step-1"}:{id:"onramp-status"}),[s,a]=(0,r.useState)(e.openedWindow);return"step-1"===n.id?(0,o.jsx)(ey.a,{client:e.client,onBack:e.onBack,partialQuote:(0,ey.R)(e.quote),step:1,onContinue:()=>{let t=ei(e.quote.onRampLink,e.theme);(0,er.h)({type:"fiat",intentId:e.quote.intentId}),a(t),i({id:"onramp-status"})}}):"onramp-status"===n.id?(0,o.jsx)(em,{client:e.client,intentId:e.quote.intentId,onBack:e.onBack,onViewPendingTx:e.onViewPendingTx,hasTwoSteps:t,openedWindow:s,quote:e.quote,onDone:e.onDone,onShowSwapFlow:e=>{i({id:"postonramp-swap",data:e})},isBuyForTx:e.isBuyForTx,isEmbed:e.isEmbed}):"postonramp-swap"===n.id?(0,o.jsx)(ef.S,{status:n.data,quote:(0,ey.R)(e.quote),client:e.client,onBack:e.onBack,onViewPendingTx:e.onViewPendingTx,onDone:e.onDone,onSwapFlowStarted:()=>{},isBuyForTx:e.isBuyForTx,isEmbed:e.isEmbed,payer:e.payer}):null}var ev=n(51787),eg=n(2624);let eb=(0,n(85738).ax)({id:137,name:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorers:[{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}]});var ew=n(27121),eC=n(6354);function eT(e){var t;let n;let{name:r}=(0,x.zw)(e.chain);return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)("div",{onClick:e=>{var t;null===(t=e.currentTarget.querySelector("input"))||void 0===t||t.focus()},children:(0,o.jsxs)(E.Container,{flex:"row",center:"both",gap:"xs",style:{flexWrap:"nowrap"},children:[(0,o.jsx)(J.Input,{variant:"outline",pattern:"^[0-9]*[.,]?[0-9]*$",inputMode:"decimal",tabIndex:-1,placeholder:"0",type:"text","data-placeholder":""===e.value,value:e.value||"0",disabled:e.freezeAmount,onClick:t=>{""===e.value&&t.currentTarget.setSelectionRange(t.currentTarget.value.length,t.currentTarget.value.length)},onChange:t=>{let n=t.target.value;n.startsWith(".")&&(n="0".concat(n)),Number.isNaN(Number(n))||(n.startsWith("0")&&!n.startsWith("0.")?e.onChange(n.slice(1)):e.onChange(n))},style:{border:"none",fontSize:(t=e.value).length>10?"26px":t.length>6?"34px":"50px",boxShadow:"none",borderRadius:"0",padding:"0",paddingBlock:"2px",fontWeight:600,textAlign:"right",width:(n=e.value.replace(".","").length,e.value.includes(".")&&(n+=.3),"calc(".concat("".concat(Math.max(1,n),"ch")," + 6px)")),maxWidth:"calc(100% - 100px)"}}),(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"lg",color:"secondaryText"})]})}),!e.hideTokenSelector&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"sm"}),(0,o.jsx)(E.Container,{flex:"row",center:"x",children:(0,o.jsxs)(ek,{variant:"secondary",fullWidth:!0,style:{fontSize:u.JB.sm},gap:"xxs",onClick:e.onSelectToken,disabled:e.freezeChainAndToken,children:[(0,o.jsxs)(E.Container,{flex:"row",center:"y",gap:"sm",children:[(0,o.jsx)(A.TokenIcon,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(E.Container,{flex:"column",style:{gap:"4px"},children:[(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"sm"}),r?(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:r}):(0,o.jsx)(C.Skeleton,{width:"90px",height:u.JB.xs})]})]}),(0,o.jsx)(i.v4q,{width:u.EA.sm,height:u.EA.sm,style:{marginLeft:"auto"}})]})})]})]})}let ek=(0,_.Z)(B.Button)(()=>{let e=(0,Z.useCustomTheme)();return{background:e.colors.tertiaryBg,border:"1px solid ".concat(e.colors.borderColor),justifyContent:"flex-start",transition:"background 0.3s",padding:u.W0.sm}});var eS=n(79515),eA=n(45164);function eE(e){let{name:t}=(0,x.zw)(e.chain),n=(0,h.t)({address:e.payerAccount.address,chain:e.chain,tokenAddress:(0,P.M)(e.token)?void 0:e.token.address,client:e.client});return(0,o.jsxs)(E.Container,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderWidth:"1px",borderTopWidth:0,borderStyle:"solid",borderBottom:"none",flexWrap:"nowrap",justifyContent:"space-between",minHeight:"64px",alignItems:"center"},children:[(0,o.jsxs)(B.Button,{variant:"ghost",onClick:e.onSelectToken,gap:"sm",style:{paddingInline:u.W0.sm,paddingBlock:u.W0.sm,minWidth:"50%",justifyContent:"flex-start"},disabled:e.freezeChainAndTokenSelection,children:[(0,o.jsx)(N.K,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(E.Container,{flex:"column",gap:"xxs",children:[(0,o.jsxs)(E.Container,{flex:"row",gap:"xs",center:"y",color:"primaryText",children:[(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"sm"}),(0,o.jsx)(i.v4q,{width:u.EA.sm,height:u.EA.sm})]}),t?(0,o.jsxs)(L.Text,{size:"xs",children:[" ",t]}):(0,o.jsx)(C.Skeleton,{width:"90px",height:u.JB.xs})]})]}),(0,o.jsxs)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:u.W0.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:u.W0.sm},children:[e.isLoading?(0,o.jsx)(C.Skeleton,{width:"120px",height:u.JB.md,color:"borderColor"}):(0,o.jsx)(L.Text,{size:"md",color:e.value?"primaryText":"secondaryText",style:{},children:(0,c.u)(Number(e.value),6)||"--"}),(0,o.jsxs)(E.Container,{flex:"row",gap:"xxs",center:"y",color:"secondaryText",children:[(0,o.jsx)(X.D,{size:u.JB.xs}),n.data?(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",weight:500,children:(0,eA.a)(n.data,!0)}):(0,o.jsx)(C.Skeleton,{width:"70px",height:u.JB.xs})]})]})]})}var eB=n(27214);function eL(e){var t;let n=(0,Y.f)(),r=!e.showAllWallets&&(null===(t=e.wallets)||void 0===t?void 0:t.every(e=>n.includes(e)));return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Pay with"}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(E.Container,{flex:"column",gap:"xs",children:n.map(t=>{var n;let i=null===(n=t.getAccount())||void 0===n?void 0:n.address;return(0,o.jsx)($,{walletId:t.id,client:e.client,address:i||"",onClick:()=>{e.onSelect(t),e.onBack()},disableChevron:!0,checked:i===e.selectedAddress},t.id)})}),(0,o.jsx)(T.L,{y:"xxl"}),!r&&(0,o.jsxs)(B.Button,{variant:"accent",fullWidth:!0,onClick:e.onConnect,gap:"xs",children:[(0,o.jsx)(i.pOD,{width:u.EA.sm,height:u.EA.sm}),"Connect Wallet"]})]})}var eW=n(80383),eF=n(86122);function ez(e){let t=(0,eW.oU)(e.client);return t.data?(0,o.jsx)(eD,{...e,onViewPendingTx:e.onViewPendingTx,supportedDestinations:t.data,buyForTx:e.buyForTx}):(0,o.jsx)(g.a,{})}function eD(e){var t,n,i,a,l,c,u,x,h,m,p,y,f,j,g,b,w,C,T;let{client:k,supportedDestinations:S,connectLocale:A,payOptions:B,buyForTx:L}=e,W=(0,v.M)(),{payer:F,setPayer:z}=function(){let e=(0,eF.r)(),t=(0,v.M)(),n=(0,ew.v)(),[o,i]=(0,r.useState)();return(0,r.useEffect)(()=>{let e=null==o?void 0:o.wallet;function t(){if(!e){i(void 0);return}let t=e.getAccount(),n=e.getChain();t&&n?(console.log("updated to",t,n),i({account:t,chain:n,wallet:e})):i(void 0)}if(e){let n=e.subscribe("chainChanged",t),o=e.subscribe("accountChanged",t);return()=>{n(),o()}}},[o]),{payer:o||(t&&n&&e?{account:t,chain:n,wallet:e}:void 0),setPayer:i}}(),[D,M]=(0,r.useState)({id:"main"}),[R,q]=(0,r.useState)(!1),{tokenAmount:N,setTokenAmount:_,toChain:V,setToChain:H,deferredTokenAmount:U,fromChain:K,setFromChain:Q,toToken:J,setToToken:Z,fromToken:Y,setFromToken:G,selectedCurrency:X,setSelectedCurrency:$}=function(e){var t,n,o,i,s,a,l,c;let u=(0,ew.v)(),{payOptions:x,buyForTx:h,supportedDestinations:m}=e,p=(null===(t=x.prefillBuy)||void 0===t?void 0:t.amount)||(h?String((0,d.n9)(h.cost-h.balance)):""),[y,f]=(0,r.useState)(p),j=(0,eC.c)(y,300),[v,g]=(0,r.useState)((null===(n=x.prefillBuy)||void 0===n?void 0:n.chain)||(null==h?void 0:h.tx.chain)||(null===(o=m.find(e=>e.chain.id===(null==u?void 0:u.id)))||void 0===o?void 0:o.chain)||eb),[b,w]=(0,r.useState)((null===(i=x.prefillBuy)||void 0===i?void 0:i.token)||P.L),[C,T]=(0,r.useState)(!1!==x.buyWithCrypto&&(null===(a=x.buyWithCrypto)||void 0===a?void 0:null===(s=a.prefillSource)||void 0===s?void 0:s.chain)||eb),[k,S]=(0,r.useState)(!1!==x.buyWithCrypto&&(null===(c=x.buyWithCrypto)||void 0===c?void 0:null===(l=c.prefillSource)||void 0===l?void 0:l.token)||P.L),[A,E]=(0,r.useState)(et.k8);return{tokenAmount:y,setTokenAmount:f,toChain:v,setToChain:g,deferredTokenAmount:j,fromChain:C,setFromChain:T,toToken:b,setToToken:w,fromToken:k,setFromToken:S,selectedCurrency:A,setSelectedCurrency:E}}({payOptions:B,buyForTx:L,supportedDestinations:S}),ee=(0,eW.QR)({client:e.client,destinationChainId:V.id,destinationTokenAddress:(0,P.M)(J)?s.K8:J.address}),eo=(0,r.useMemo)(()=>e_(S,B,e.supportedTokens),[e.supportedTokens,S,B]),ei=(0,r.useMemo)(()=>{if(ee.data)return e_(ee.data,B,e.supportedTokens)},[e.supportedTokens,ee.data,B]);if("connect-payer-wallet"===D.id)return(0,o.jsx)(I.A,{accountAbstraction:null===(t=e.connectOptions)||void 0===t?void 0:t.accountAbstraction,appMetadata:null===(n=e.connectOptions)||void 0===n?void 0:n.appMetadata,chain:null===(i=e.connectOptions)||void 0===i?void 0:i.chain,chains:null===(a=e.connectOptions)||void 0===a?void 0:a.chains,client:e.client,connectLocale:e.connectLocale,isEmbed:e.isEmbed,onBack:()=>M(D.backScreen),onSelect:e=>{let t=e.getAccount(),n=e.getChain();e&&t&&n&&z({account:t,chain:n,wallet:e})},recommendedWallets:null===(l=e.connectOptions)||void 0===l?void 0:l.recommendedWallets,showAllWallets:!!(null===(c=e.connectOptions)||void 0===c?void 0:c.showAllWallets),walletConnect:null===(u=e.connectOptions)||void 0===u?void 0:u.walletConnect,wallets:null===(x=e.connectOptions)||void 0===x?void 0:x.wallets});if("swap-flow"===D.id&&F)return(0,o.jsx)(eB.$,{isBuyForTx:!!e.buyForTx,isEmbed:e.isEmbed,client:k,onBack:()=>{M({id:"buy-with-crypto"})},buyWithCryptoQuote:D.quote,payer:F,onViewPendingTx:e.onViewPendingTx,isFiatFlow:!1,onDone:e.onDone,onTryAgain:()=>{M({id:"buy-with-crypto"})}});if("fiat-flow"===D.id&&F)return(0,o.jsx)(ej,{isBuyForTx:!!e.buyForTx,quote:D.quote,onBack:()=>{M({id:"buy-with-fiat"})},client:k,testMode:!1!==e.payOptions.buyWithFiat&&(null===(h=e.payOptions.buyWithFiat)||void 0===h?void 0:h.testMode)===!0,theme:"string"==typeof e.theme?e.theme:e.theme.type,onViewPendingTx:e.onViewPendingTx,openedWindow:D.openedWindow,onDone:e.onDone,isEmbed:e.isEmbed,payer:F});if("select-currency"===D.id){let e=()=>M(D.backScreen);return(0,o.jsx)(en,{onSelect:t=>{e(),$(t)},onBack:e})}if("select-to-token"===D.id){let t=S.map(e=>e.chain),n=()=>M(D.backScreen);return(null===(p=B.prefillBuy)||void 0===p?void 0:null===(m=p.allowEdits)||void 0===m?void 0:m.token)===!1?(0,o.jsx)(eV,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:H,goBack:n}):(0,o.jsx)(O.k,{onBack:n,tokenList:(((null==V?void 0:V.id)?eo[V.id]:void 0)||[]).filter(e=>e.address!==s.K8),onTokenSelect:e=>{Z(e),n()},chain:V,chainSelection:(null===(f=B.prefillBuy)||void 0===f?void 0:null===(y=f.allowEdits)||void 0===y?void 0:y.chain)!==!1?{chains:t,select:e=>{H(e)}}:void 0,connectLocale:A,client:k,modalTitle:"Buy"})}if("select-from-token"===D.id&&ee.data&&ei){let t=ee.data.map(e=>e.chain),n=()=>M(D.backScreen);return!1!==B.buyWithCrypto&&(null===(b=B.buyWithCrypto)||void 0===b?void 0:null===(g=b.prefillSource)||void 0===g?void 0:null===(j=g.allowEdits)||void 0===j?void 0:j.token)===!1?(0,o.jsx)(eV,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:Q,goBack:n}):(0,o.jsx)(O.k,{onBack:n,tokenList:(((null==K?void 0:K.id)?ei[K.id]:void 0)||[]).filter(e=>e.address!==s.K8),onTokenSelect:e=>{G(e),n()},chain:K,chainSelection:!1!==B.buyWithCrypto&&(null===(T=B.buyWithCrypto)||void 0===T?void 0:null===(C=T.prefillSource)||void 0===C?void 0:null===(w=C.allowEdits)||void 0===w?void 0:w.chain)!==!1?{chains:ee.data.map(e=>e.chain),select:e=>Q(e)}:void 0,connectLocale:A,client:k,modalTitle:"Pay with"})}return(0,o.jsx)(E.Container,{animate:"fadein",children:(0,o.jsxs)("div",{children:["main"===D.id&&(0,o.jsx)(eI,{payerAccount:null==F?void 0:F.account,buyForTx:L,client:k,onSelectBuyToken:()=>M({id:"select-to-token",backScreen:D}),payOptions:B,setTokenAmount:_,toChain:V,toToken:J,tokenAmount:N,connectOptions:e.connectOptions,onViewPendingTx:e.onViewPendingTx,setScreen:M,supportedDestinations:S,onBack:e.onBack,theme:e.theme,hasEditedAmount:R,setHasEditedAmount:q}),("select-payment-method"===D.id||"buy-with-crypto"===D.id||"buy-with-fiat"===D.id)&&F&&(0,o.jsxs)(eP,{selectedChain:V,selectedToken:J,tokenAmount:N,client:k,onBack:()=>{"buy-with-crypto"===D.id||"buy-with-fiat"===D.id?M({id:"select-payment-method"}):"select-payment-method"===D.id&&M({id:"main"})},children:["select-payment-method"===D.id&&(0,o.jsx)(eM,{setScreen:e=>M({id:e})}),"buy-with-crypto"===D.id&&W&&(0,o.jsx)(eR,{setScreen:M,tokenAmount:U,toChain:V,toToken:J,fromChain:K,fromToken:Y,showFromTokenSelector:()=>{M({id:"select-from-token",backScreen:D})},payer:F,buyForTx:L||null,client:k,isEmbed:e.isEmbed,onDone:e.onDone,onViewPendingTx:e.onViewPendingTx,payOptions:B,connectLocale:A,connectOptions:e.connectOptions,setPayer:z,activeAccount:W}),"buy-with-fiat"===D.id&&(0,o.jsx)(eq,{setScreen:M,tokenAmount:U,toChain:V,toToken:J,selectedCurrency:X,buyForTx:L||null,client:k,isEmbed:e.isEmbed,onDone:e.onDone,onViewPendingTx:e.onViewPendingTx,payOptions:B,theme:e.theme,showCurrencySelector:()=>{M({id:"select-currency",backScreen:D})},payer:F,setTokenAmount:_,setHasEditedAmount:q})]})]})})}function eO(e){return(0,o.jsx)("div",{children:(0,o.jsxs)(E.Container,{flex:"row",gap:"sm",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsxs)(E.Container,{flex:"row",gap:"xs",center:"y",children:[(0,o.jsx)(L.Text,{color:"primaryText","data-testid":"tokenAmount",size:"xl",children:(0,c.u)(Number(e.tokenAmount),6)}),(0,o.jsxs)(E.Container,{flex:"row",gap:"xxs",center:"y",children:[(0,o.jsx)(W.TokenSymbol,{token:e.selectedToken,chain:e.selectedChain,size:"md",color:"secondaryText"}),(0,o.jsx)(N.K,{chain:e.selectedChain,client:e.client,size:"sm",token:e.selectedToken})]})]}),(0,o.jsx)(b.G,{chain:e.selectedChain,client:e.client,size:"sm",short:!0})]})})}function eI(e){var t,n,i,a,l,x;let{showPaymentSelection:h,buyWithCryptoEnabled:m,buyWithFiatEnabled:p}=function(e){let{payOptions:t,supportedDestinations:n,toChain:o,toToken:i}=e,{fiat:r,swap:a}=function(){let e=n.find(e=>e.chain.id===o.id);if(!e)return{fiat:!0,swap:!0};let t=(0,P.M)(i)?s.K8:i.address,r=e.tokens.find(e=>e.address.toLowerCase()===t.toLowerCase());return r?{fiat:r.buyWithFiatEnabled,swap:r.buyWithCryptoEnabled}:{fiat:!0,swap:!0}}(),l=!1!==t.buyWithFiat&&r,c=!1!==t.buyWithCrypto&&a;return{buyWithFiatEnabled:l,buyWithCryptoEnabled:c,showPaymentSelection:l&&c}}({payOptions:e.payOptions,supportedDestinations:e.supportedDestinations,toChain:e.toChain,toToken:e.toToken}),{buyForTx:y,setTokenAmount:f,payerAccount:j,client:v,tokenAmount:g,payOptions:b,toToken:w,toChain:C}=e,{amountNeeded:k}=function(e){let{buyForTx:t,hasEditedAmount:n,setTokenAmount:o,account:i}=e,s=!n,[a,l]=(0,r.useState)(null==t?void 0:t.cost);return(0,r.useEffect)(()=>{if(!t)return;let e=!0;async function n(){if(t&&e){try{let n=await (0,ev.u)(t.tx,null==i?void 0:i.address);if(!e)return;l(n),s&&n>t.balance&&o((0,d.n9)(n-t.balance))}catch(e){}await (0,eg.D)(3e4),n()}}return n(),()=>{e=!1}},[t,s,o,i]),{amountNeeded:a}}({setTokenAmount:f,buyForTx:y||null,hasEditedAmount:e.hasEditedAmount,account:j||null}),S=!g;return(0,o.jsxs)(E.Container,{p:"lg",children:[(0,o.jsx)(E.ModalHeader,{title:e.buyForTx?"Not enough ".concat(e.buyForTx.tokenSymbol):"Buy",onBack:e.onBack}),k&&e.buyForTx?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(eN,{amountNeeded:String((0,c.u)(Number((0,d.n9)(k)),6)),buyForTx:e.buyForTx,client:v})]}):(0,o.jsx)(T.L,{y:"xl"}),(0,o.jsx)(eT,{value:g,onChange:async t=>{e.setHasEditedAmount(!0),f(t)},freezeAmount:(null===(n=b.prefillBuy)||void 0===n?void 0:null===(t=n.allowEdits)||void 0===t?void 0:t.amount)===!1,freezeChainAndToken:(null===(a=b.prefillBuy)||void 0===a?void 0:null===(i=a.allowEdits)||void 0===i?void 0:i.chain)===!1&&(null===(x=b.prefillBuy)||void 0===x?void 0:null===(l=x.allowEdits)||void 0===l?void 0:l.token)===!1,token:w,chain:C,onSelectToken:e.onSelectBuyToken,client:e.client,hideTokenSelector:!!e.buyForTx}),(0,o.jsx)(T.L,{y:"xl"}),(0,o.jsxs)(E.Container,{flex:"column",gap:"sm",children:[j?(0,o.jsx)(B.Button,{variant:"accent",fullWidth:!0,disabled:S,"data-disabled":S,onClick:()=>{h?e.setScreen({id:"select-payment-method"}):m?e.setScreen({id:"buy-with-crypto"}):p?e.setScreen({id:"buy-with-fiat"}):console.error("No payment method enabled")},children:"Continue"}):(0,o.jsx)("div",{children:(0,o.jsx)(F.ConnectButton,{...e.connectOptions,client:e.client,theme:e.theme,connectButton:{style:{width:"100%"}}})}),j&&(0,o.jsx)(B.Button,{variant:"outline",fullWidth:!0,style:{padding:u.W0.xs,fontSize:u.JB.sm},onClick:e.onViewPendingTx,children:"View all transactions"})]})]})}function eP(e){return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)(E.Container,{p:"lg",children:(0,o.jsx)(E.ModalHeader,{title:"Buy",onBack:e.onBack})}),(0,o.jsxs)(E.Container,{px:"lg",style:{paddingBottom:u.W0.lg},children:[(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsx)(eO,{selectedToken:e.selectedToken,selectedChain:e.selectedChain,tokenAmount:e.tokenAmount,client:e.client}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Line,{}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(L.Text,{size:"sm",children:" Pay with "}),(0,o.jsx)(T.L,{y:"sm"}),e.children]})]})}function eM(e){return(0,o.jsx)(E.Container,{animate:"fadein",children:(0,o.jsxs)(E.Container,{flex:"column",gap:"sm",children:[(0,o.jsxs)(B.Button,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("buy-with-fiat"),gap:"sm",style:{justifyContent:"flex-start",textAlign:"left"},children:[(0,o.jsx)(E.Container,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(i.Xwj,{style:{width:u.EA.md,height:u.EA.md}})}),(0,o.jsxs)(E.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{size:"md",color:"primaryText",children:"Credit Card"}),(0,o.jsx)(L.Text,{size:"xs",children:"Easily and securely make payments"})]})]}),(0,o.jsxs)(B.Button,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("buy-with-crypto"),style:{justifyContent:"flex-start"},gap:"sm",children:[(0,o.jsx)(E.Container,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(D.O,{size:u.EA.md})}),(0,o.jsxs)(E.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{size:"md",color:"primaryText",children:"Crypto"}),(0,o.jsx)(L.Text,{size:"xs",children:"Pay with confidence using crypto"})]})]})]})})}function eR(e){var t,n,i,a,l,c,d,u;let{setScreen:x,payer:y,client:f,toChain:j,tokenAmount:v,toToken:g,fromChain:b,fromToken:C,showFromTokenSelector:A,payOptions:W}=e,[F,z]=(0,r.useState)(e.payOptions.recipientAddress||e.activeAccount.address),{drawerRef:D,drawerOverlayRef:O,isOpen:I,setIsOpen:M}=(0,w.useDrawer)(),[q,N]=(0,r.useState)("fees"),_=(0,h.t)({address:y.account.address,chain:b,tokenAddress:(0,P.M)(C)?void 0:C.address,client:f}),V=(u=v&&!(b.id===j.id&&C===g)?{fromAddress:y.account.address,toAddress:F,fromChainId:b.id,fromTokenAddress:(0,P.M)(C)?s.K8:C.address,toChainId:j.id,toTokenAddress:(0,P.M)(g)?s.K8:g.address,toAmount:v,client:f,purchaseData:W.purchaseData}:void 0,(0,m.useQuery)({staleTime:3e4,refetchInterval:3e4,gcTime:3e4,queryKey:["buyWithCryptoQuote",u],queryFn:()=>{if(!u)throw Error("Swap params are required");return(0,p.D)(u)},enabled:!!u,retry:(e,t)=>!(e>3||t.message.includes("Minimum purchase"))})),H=null===(t=V.data)||void 0===t?void 0:t.swapDetails.fromAmount,U=!!H&&!!_.data&&Number(_.data.displayValue)<Number(H),K=!V.data||U,Q=e.payer.chain.id!==b.id,J=!1!==W.buyWithCrypto?null===(n=W.buyWithCrypto)||void 0===n?void 0:n.prefillSource:void 0,Z=!!e.payOptions.recipientAddress;return(0,o.jsxs)(E.Container,{flex:"column",gap:"md",animate:"fadein",children:[I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.DrawerOverlay,{ref:O}),(0,o.jsxs)(w.Drawer,{ref:D,close:()=>M(!1),children:["fees"===q&&V.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(eS.O,{quote:V.data,align:"left"})]}),"receiver"===q&&(0,o.jsx)(ee,{client:e.client,onSelect:e=>z(e),receiverAddress:F,onBack:()=>M(!1)}),"payer"===q&&(0,o.jsx)(eL,{client:f,onSelect:t=>{let n=t.getChain(),o=t.getAccount();n&&o&&e.setPayer({account:o,chain:n,wallet:t})},showAllWallets:!!(null===(i=e.connectOptions)||void 0===i?void 0:i.showAllWallets),wallets:null===(a=e.connectOptions)||void 0===a?void 0:a.wallets,onBack:()=>{M(!1)},onConnect:()=>{x({id:"connect-payer-wallet",backScreen:{id:"buy-with-crypto"}})},selectedAddress:y.account.address})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)($,{client:e.client,onClick:()=>{M(!0),N("payer")},address:e.payer.account.address,walletId:e.payer.wallet.id,containerStyle:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}),(0,o.jsx)(eE,{value:H||"",onSelectToken:A,chain:b,token:C,isLoading:V.isLoading&&!H,client:f,freezeChainAndTokenSelection:(null==J?void 0:null===(l=J.allowEdits)||void 0===l?void 0:l.chain)===!1&&(null==J?void 0:null===(c=J.allowEdits)||void 0===c?void 0:c.token)===!1,payerAccount:e.payer.account}),(0,o.jsx)(R,{quoteIsLoading:V.isLoading,estimatedSeconds:null===(d=V.data)||void 0===d?void 0:d.swapDetails.estimated.durationSeconds,onViewFees:function(){V.data&&(M(!0),N("fees"))}}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(L.Text,{size:"sm",children:"Send to"}),(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsx)($,{client:e.client,disabled:Z,disableChevron:Z,onClick:()=>{M(!0),N("receiver")},address:F,walletId:void 0})]}),V.error&&(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,children:function(e){let t="Unable to get price quote";try{if(e instanceof Error&&e.message.includes("Minimum"))return e.message.replace("Fetch failed: Error: ","");return t}catch(e){return t}}(V.error)}),!Q||V.isLoading||U||V.error?(0,o.jsx)(B.Button,{variant:K?"outline":"accent",fullWidth:!0,"data-disabled":K,disabled:K,onClick:async()=>{K||!V.data||x({id:"swap-flow",quote:V.data})},gap:"xs",children:U?(0,o.jsx)(L.Text,{color:"danger",children:"Not Enough Funds"}):V.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(k.Spinner,{size:"sm",color:"accentText"})]}):"Continue"}):(0,o.jsx)(S.v,{variant:"accent",fullWidth:!0,switchChain:async()=>{await e.payer.wallet.switchChain(b)}})]})}function eq(e){var t,n,i,a;let{toToken:d,tokenAmount:u,payer:x,client:h,setScreen:p,toChain:y,showCurrencySelector:f,selectedCurrency:v}=e,[g,b]=(0,r.useState)(e.payOptions.recipientAddress||e.payer.account.address),{drawerRef:C,drawerOverlayRef:S,isOpen:A,setIsOpen:F}=(0,w.useDrawer)(),[z,D]=(0,r.useState)("fees"),O=e.payOptions.buyWithFiat,I=(a=!1!==O&&u?{fromCurrencySymbol:v.shorthand,toChainId:y.id,toAddress:g,toTokenAddress:(0,P.M)(d)?s.K8:d.address,toAmount:u,client:h,isTestMode:null==O?void 0:O.testMode,purchaseData:e.payOptions.purchaseData,fromAddress:x.account.address}:void 0,(0,m.useQuery)({queryKey:["useBuyWithFiatQuote",a],queryFn:async()=>{if(!a)throw Error("No params provided");return j(a)},enabled:!!a,retry(e,t){if(e>3)return!1;try{if("MINIMUM_PURCHASE_AMOUNT"===t.error.code)return!1}catch(e){}return!0}})),M=!I.data,q=!!e.payOptions.recipientAddress,N=!I.isLoading&&I.error?function(t){try{if("MINIMUM_PURCHASE_AMOUNT"===t.error.code){let n=t.error,o=n.data.minimumAmountUSDCents,i=n.data.requestedAmountUSDCents;if(0===n.data.requestedAmountUSDCents)return{msg:["Purchase amount is too low","Increase the amount and try again"]};let r=Number(e.tokenAmount);return{minAmount:o*r/i*1.2}}}catch(e){}return{msg:["Unable to get price quote"]}}(I.error):void 0;return(0,o.jsxs)(E.Container,{flex:"column",gap:"md",animate:"fadein",children:[A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.DrawerOverlay,{ref:S}),(0,o.jsxs)(w.Drawer,{ref:C,close:()=>F(!1),children:["fees"===z&&I.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(T.L,{y:"lg"}),(0,o.jsx)(eS.W,{quote:I.data})]}),"receiver"===z&&(0,o.jsx)(ee,{client:e.client,onSelect:e=>b(e),receiverAddress:g,onBack:()=>F(!1)})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(V,{isLoading:I.isLoading,value:null===(t=I.data)||void 0===t?void 0:t.fromCurrencyWithFees.amount,client:h,currency:v,onSelectCurrency:f}),(0,o.jsx)(R,{quoteIsLoading:I.isLoading,estimatedSeconds:null===(n=I.data)||void 0===n?void 0:n.estimatedDurationSeconds,onViewFees:function(){I.data&&(D("fees"),F(!0))}}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(L.Text,{size:"sm",children:"Send to"}),(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsx)($,{client:e.client,onClick:()=>{D("receiver"),F(!0)},address:g,disabled:q,disableChevron:q,walletId:void 0})]}),N&&(0,o.jsxs)("div",{children:[N.minAmount&&(0,o.jsxs)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",(0,c.u)(N.minAmount,6)," ",(0,o.jsx)(W.TokenSymbol,{token:d,chain:y,size:"sm",inline:!0,color:"danger"})]}),null===(i=N.msg)||void 0===i?void 0:i.map(e=>(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:e},e))]}),(null==N?void 0:N.minAmount)?(0,o.jsx)(B.Button,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(N.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):(0,o.jsx)(B.Button,{variant:M?"outline":"accent","data-disabled":M,disabled:M,fullWidth:!0,onClick:function(){if(!I.data)return;let t=l(I.data),n=null;t||(n=ei(I.data.onRampLink,"string"==typeof e.theme?e.theme:e.theme.type),(0,er.h)({type:"fiat",intentId:I.data.intentId})),p({id:"fiat-flow",quote:I.data,openedWindow:n})},gap:"xs",children:I.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(k.Spinner,{size:"sm",color:"accentText"})]}):"Continue"})]})}function eN(e){let t=(0,x.zw)(e.buyForTx.tx.chain);return(0,o.jsxs)(E.Container,{children:[(0,o.jsx)(T.L,{y:"xs"}),(0,o.jsxs)(E.Container,{flex:"row",style:{justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{size:"sm",children:"Amount Needed"}),(0,o.jsxs)(E.Container,{flex:"column",style:{alignItems:"flex-end"},children:[(0,o.jsxs)(E.Container,{flex:"row",gap:"xs",center:"y",children:[(0,o.jsxs)(L.Text,{color:"primaryText",size:"sm",children:[e.amountNeeded," ",e.buyForTx.tokenSymbol]}),(0,o.jsx)(A.TokenIcon,{chain:e.buyForTx.tx.chain,client:e.client,size:"sm",token:P.L})]}),(0,o.jsx)(T.L,{y:"xxs"}),t.name?(0,o.jsx)(L.Text,{size:"sm",children:t.name}):(0,o.jsx)(C.Skeleton,{height:u.JB.sm,width:"50px"})]})]}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Line,{}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsxs)(E.Container,{flex:"row",style:{justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{size:"sm",children:"Your Balance"}),(0,o.jsxs)(E.Container,{flex:"row",gap:"xs",children:[(0,o.jsxs)(L.Text,{color:"primaryText",size:"sm",children:[(0,c.u)(Number((0,d.n9)(e.buyForTx.balance)),6)," ",e.buyForTx.tokenSymbol]}),(0,o.jsx)(A.TokenIcon,{chain:e.buyForTx.tx.chain,client:e.client,size:"sm",token:P.L})]})]}),(0,o.jsx)(T.L,{y:"md"}),(0,o.jsx)(E.Line,{}),(0,o.jsx)(T.L,{y:"xl"}),(0,o.jsx)(L.Text,{center:!0,size:"sm",children:"Purchase"}),(0,o.jsx)(T.L,{y:"xxs"})]})}function e_(e,t,n){let o={},i=!1===t.buyWithFiat,r=!1===t.buyWithCrypto;for(let t of e)o[t.chain.id]=t.tokens.filter(e=>!!e.buyWithCryptoEnabled&&!!e.buyWithFiatEnabled||(!!e.buyWithCryptoEnabled||!i)&&(!!e.buyWithFiatEnabled||!r));if(n)for(let e in n){let t=Number(e),i=n[t];i&&(o[t]=i)}return o}function eV(e){return(0,o.jsx)(z.NetworkSelectorContent,{client:e.client,connectLocale:e.connectLocale,showTabs:!1,onBack:e.goBack,chains:e.chains,closeModal:e.goBack,networkSelector:{renderChain:t=>(0,o.jsx)(z.ChainButton,{chain:t.chain,confirming:!1,switchingFailed:!1,onClick:()=>{e.setChain(t.chain),e.goBack()},client:e.client,connectLocale:e.connectLocale})}})}},94071:function(e,t,n){n.r(t),n.d(t,{Drawer:function(){return f},DrawerContainer:function(){return j},DrawerOverlay:function(){return g},drawerOpenAnimation:function(){return v},useDrawer:function(){return b}});var o=n(56093),i=n(3827),r=n(34686),s=n(62177),a=n(64090),l=n(4966),c=n(72568),d=n(96635),u=n(58852),x=n(94234),h=n(54765),m=n(31137),p=n(3702);function y(){let e=(0,o._)(["\n  from {\n    opacity: 0;\n    transform: translateY(100px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]);return y=function(){return e},e}let f=(0,a.forwardRef)(function(e,t){return(0,i.jsx)(j,{ref:t,children:(0,i.jsx)(x.H,{children:(0,i.jsxs)(m.Container,{p:"lg",children:[(0,i.jsx)(h.CrossContainer,{children:(0,i.jsx)(p.IconButton,{type:"button","aria-label":"Close",onClick:e.close,children:(0,i.jsx)(s.Pxu,{width:c.EA.md,height:c.EA.md,style:{color:"inherit"}})})}),e.children]})})})}),j=(0,u.lx)(e=>{let t=(0,l.useCustomTheme)();return{zIndex:1e4,borderTopLeftRadius:c.q0.xl,borderTopRightRadius:c.q0.xl,background:t.colors.modalBg,position:"absolute",bottom:0,left:0,right:0,animation:"".concat(v," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1)"),borderTop:"1px solid ".concat(t.colors.borderColor)}}),v=(0,r.F4)(y()),g=(0,u.lx)(e=>({backgroundColor:(0,l.useCustomTheme)().colors.modalOverlayBg,zIndex:9999,position:"absolute",inset:0,animation:"".concat(d.BX," 400ms cubic-bezier(0.16, 1, 0.3, 1)")}));function b(){let[e,t]=(0,a.useState)(!1),n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useCallback)(()=>new Promise(e=>{if(n.current){var t;let i={easing:"cubic-bezier(0.175, 0.885, 0.32, 1.1)",fill:"forwards",duration:300},r=n.current.animate([{transform:"translateY(100%)",opacity:0}],i);null===(t=o.current)||void 0===t||t.animate([{opacity:0}],i),r.onfinish=()=>e()}else e()}),[]),r=(0,a.useCallback)(async e=>{e?t(!0):(await i(),t(!1))},[i]);return(0,a.useLayoutEffect)(()=>{if(!e)return;let t=e=>{n.current&&e.target instanceof Node&&!n.current.contains(e.target)&&r(!1)};return requestAnimationFrame(()=>{document.addEventListener("click",t)}),()=>{document.removeEventListener("click",t)}},[e,r]),{drawerRef:n,drawerOverlayRef:o,setIsOpen:r,isOpen:e}}}}]);